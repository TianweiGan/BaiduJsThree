export class AssetsScene {
    /**
     * @param {Object} arg - 配置参数
     * @param {string} arg.host - 配置资产服务环境,默认为线上
     * @param {string} arg.system - 标志数据来源
     * @param {string} arg.path - 配置资产服务Path,默认为/twin/assetApi
     * @param {number} arg.sceneId - 配置场景ID
     * @param {number} arg.projectId - 资产项目ID（字符串），优先使用sceneId，sceneId没有再使用projectId。跟assetsConfig区别是仍使用SDK请求接口
     * @param {string} arg.assetsConfig - 使用资产配置，不使用场景配置
     * @param {string} arg.assetsConfig.style - LOD风格
     * @param {string} arg.assetsConfig.projectInfo - 项目详情
     * @param {string} arg.assetsConfig.materialList - 材质列表
     * @param {string} arg.assetsConfig.modelList - 模型列表
     * @param {string} arg.assetsConfig.resourceConfig - 静态资源前缀配置
     * @param {undefined | typeof AbstractLoadPolicy} arg.loadPolicy - 获取设备列表的方法
     * @param {Object} arg.auth - 服务鉴权
     * @param {Object} arg.auth.bosAK - 静态服务鉴权ak
     * @param {Object} arg.renderOption - 可选：场景渲染配置
     * @param {boolean} arg.renderOption.loadDevice - 是否加载设备，默认加载
     * @param {boolean} arg.renderOption.useGroupInfo - 使用获取分组数据，只有存在分组数据时才可以调用分组接口
     * @param {boolean} arg.renderOption.useParade - 使用获取分组数据，只有存在分组数据时才可以调用分组接口
     * @param {number} arg.renderOption.useDefaultRender - 是否默认渲染
     * @param {number} arg.renderOption.useDefaultPosition - 是否应用默认视角
     * @param {number} arg.renderOption.useDefaultPlane - 是否应用默认地面
     * @param {number} arg.renderOption.useDefaultSky - 是否应用默认天空
     * @param {number} arg.renderOption.useDefaultLight - 是否应用默认灯光
     * @param {number} arg.renderOption.useDefaultLodTileLayer - 是否应用资产配置的默认高精地图数据
     * @param {number} arg.renderOption.useDefault3DTileLayer - 是否应用资产配置的默认高精地图数据
     * @param {number} arg.renderOption.useDefaultMVTLayer - 是否应用资产配置的默认MVT地图数据
     * @param {number} arg.renderOption.useDefaultTag - 是否应用资产配置的默认标记
     * @param {boolean} arg.renderOption.useClip - 是否对地图应用裁切
     * @param {number} arg.renderOption.minZoom - 最小生效视野等级
     * @param {string} arg.renderOption.anchor - 区域加载锚点 mapCenter/cameraPosition
     * @param {function} arg.renderOption.anchorGetter - 区域加载锚点自定义获取方法
     * @param {number} arg.renderOption.radius - 区域加载半径 单位m
     * @param {number} arg.renderOption.ceilRender - 是否启用网格记载
     * @param {number} arg.renderOption.ceilRenderLevel - 网格加载大小 默认15
     * @param {number} arg.renderOption.center - 区域加载初始区域中心坐标
     * @param {number} arg.renderOption.debounceTime - 区域加载防抖时间 单位ms
     * @param {string} arg.renderOption.expireHandleType - 区域加载失效物体的处理方式 hide/dispose/show
     * @param {number} arg.renderOption.reuseNum - 转换instancedModel的数量下限
     * @param {Object} arg.activeOption - 可选：动态信息渲染配置
     * @param {boolean} arg.activeOption.status - 可选：是否打开 默认：false
     * @param {string} arg.activeOption.host - 可选：动态服务host 不填为arg.host wss 开头
     * @param {string} arg.activeOption.path - 可选：动态服务path 不填为/twin/trafficinfoplat
     * @param {number} arg.activeOption.level - 可选：格子等级 默认：17
     * @param {number} arg.tileConfig.url - 可选：LOD地址，会按逗号切分成数组
     * @param {number} arg.tileConfig.offline - 可选：是否使用离线的资源
     * @param {number} arg.tileConfig.urlList - 可选：LOD地址列表
     */
    constructor(arg?: {
        host: string;
        system: string;
        path: string;
        sceneId: number;
        projectId: number;
        assetsConfig: string;
    });
    /** @private */ private _options;
    /** @private */ private _assetsInfo;
    /** @private */ private _allModelList;
    /** @private */ private _assetsInitParams;
    /** @private */ private _assetsModelsList;
    /** @private */ private _preSubmitAssetsList;
    /** @private */ private _viewChangeListenerCall;
    /** @private */ private _viewChangeListenerType;
    /** @private */ private _viewRenderCall;
    /** @private */ private _viewRenderOption;
    /** @private */ private _viewRenderStatus;
    /** @private */ private _viewRenderSwitchStatus;
    /** @private */ private _layerHideMap;
    /** @private */ private _allAllModelVisible;
    /** @private */ private _modelInfoScrollMap;
    /** @private */ private _modelInfoMap;
    /** @private */ private _deviceAPI;
    /** 所有资产模型 */ models: any[];
    /** 当前场景模式 */ mode: string;
    /** 当前编辑模式 */ editMode: string;
    /** 引擎核心 */ engine: any;
    /** 资产项目ID */ projectId: string;
    /** 模型处理类 */ modelHandler: any;
    _3dTileList: any[];
    _mvtList: any[];
    _lodLayer: MapLodLayer | null;
    _tileRenderStatus: boolean;
    _groupDeviceInfo: any[];
    _preRenderDeviceLine: any[];
    _modelExtraConfig: {};
    _delayedLoopMap: {};
    setDeviceHidenList: any[];
    setModelMaterialMap: {};
    haveTileList: any[];
    tileDeviceMap: {};
    assetsToken: string;
    lightStatus: boolean;
    _zoomVal: number;
    _headingVal: number;
    /** @private */
    private handleBeforeRender;
    /** @private */
    private afterAddToEngine;
    /** @private */
    private beforeRemoveFromEngine;
    /**
     * @private
     */
    private checkAuth;
    /** @private */
    private setLight;
    /** @private */
    private getAssetsInfo;
    paradeInfo: any;
    mapLayers: any[] | undefined;
    viewParams: {
        point: any;
        heading: number;
        pitch: number;
        range: any;
    } | undefined;
    _ceilManager: CeilManager | undefined;
    _activeWs: import("../utils/ws").Ws | undefined;
    _activeConnect: any;
    /** @private */
    private add3DTiles;
    _viewPosition: any;
    /** @private */
    private addMVTLayer;
    /** @private */
    private addPlane;
    /** @private */
    private loadSkyBox;
    /** @private */
    private preloadModels;
    /** @private */
    private bindClick;
    /**
     * @private
     * @param {*} transformModel
     */
    private createBox;
    /**
     * @private
     * 使模型进入编辑状态
     * @param {*} model
     * @param {*} info
     * @param {*} bindStatus
     */
    private editModel;
    /**
     * @private
     * 更新模型
     * @param {*} transformModel
     * @param {*} info
     */
    private updateDevice;
    setDeviceVisible(key: any, value: any, status: any): void;
    /**
     * 改变场景状态
     * @param {'readOnly' | 'add' | 'edit'} type 场景类型
     */
    changeSceneMode(type: "readOnly" | "add" | "edit"): void;
    /**
     * 切换编辑模式（主子模型）
     * @param {*} editType 'device' or 'subModel'
     * TODO: 子模型模式暂不支持，待开发
     */
    changeEditMode(editType: any): void;
    /**
     * 关闭编辑控制器
     */
    closeEditor(): void;
    /**
     * 开启新增预览
     * @param {*} info 模型表信息
     * @param {*} tile 路网3DTile
     */
    openAddPreview(info: any, tile: any): Promise<void>;
    _previewModel: any;
    _addPreviewEvent: ((e: any) => void) | null | undefined;
    _tile: any;
    extraOnloadFn(): (params: any) => void;
    wrapperOnLoad(params: any): void;
    /**
     * 关闭新增预览
     */
    closeAddPreview(): void;
    /**
     * 新增点位
     * @param {*} point 点位
     * @param {*} config 模型信息
     * @param {*} defaultEdit 是否默认开启编辑器
     * @returns {Object} 新增信息
     */
    addDevice(point: any, config: any, defaultEdit?: any): Object;
    /**
     * 通过参数更新点位
     * @param {*} deviceInfo 模型表信息（通过点击回调可以获取）
     * @param {Object} info 调整参数信息
     * @param {Number} info.x 经度
     * @param {Number} info.y 纬度
     * @param {Number} info.z 高度
     * @param {Number} info.rotateX x轴旋转角度
     * @param {Number} info.rotateY y轴旋转角度
     * @param {Number} info.rotateZ z轴旋转角度
     * @param {Number} info.scaleX x轴缩放值
     * @param {Number} info.scaleY y轴缩放值
     * @param {Number} info.scaleZ z轴缩放值
     */
    editDeviceByParams(deviceInfo: any, info: {
        x: number;
        y: number;
        z: number;
        rotateX: number;
        rotateY: number;
        rotateZ: number;
        scaleX: number;
        scaleY: number;
        scaleZ: number;
    }): void;
    /**
     * 新增/更新点位信息
     * @param {*} deviceInfo 需要更新的模型
     */
    submitDeviceInfo(deviceInfo: any): Promise<any>;
    /**
     * 删除点位
     * @param {*} model 需要删除的模型
     */
    deleteDevice(model: any): Promise<any>;
    /**
     * 打开视野加载
     */
    openViewRenderSceneModel(): Promise<void>;
    handleAreaRender(): Promise<void>;
    /**
     * 操作动态模型
     * @param {*} model uuid 或者 模型本身
     * @param {*} type 模型类型
     *  // 信号灯 signalLamp
        // 风机 fan
        // 诱导屏 guidanceScreen
        // 路灯 streetlight
        // 卷帘门 rollingShutterDoor
        // 升降杆 liftRod
     * @param {*} info 动态信息
     * @returns
     */
    handleActiveDevice(modelInfo: any, type: any, info: any): void;
    /**
     * 更改去预加载开关状态
     * @param status
     */
    switchViewRender(status: any): void;
    /**
     * 改变区域加载策略
     * @param type 'debounce' or 'throttle'
     * @param callBack
     */
    changeViewRender(type: any, option: any): void;
    /**
     * 高亮模型
     * @param info 模型信息
     * @param color 颜色
     * @param status 高亮/去高亮
     */
    lightModelColor(info: any, color: any, status?: boolean): void;
    /**
     * 通过Layer改变模型显隐
     * @param {*} layer Layer_id
     * @param {*} showStatus 显示状态
     */
    changeModelVisibleByLayer(layer: any, showStatus: any): any[];
    /**
     * 改变所有点位模型的显示状态
     * @param {*} status 显示状态
     */
    changeAllModelVisible(status: any): void;
    /** @private */
    private setInfoScroll;
    /**
     * 为模型贴图
     * @param info 模型信息（模型或者模型名称）
     * @param imgs [ [ 点位下标， 贴图文字信息 ] ]
     */
    setMaterialMapByInfo(info: any, contextInfoList: any): Promise<void>;
    /**
     * 为模型贴图
     * @param info 模型信息（模型或者模型名称）
     * @param imgs [ [ 点位下标， 图片链接 ] ]
     */
    setMaterialMap(info: any, imgs: any): void;
    /**
     * 执行模型帧动画
     * @param info 模型信息（模型或者模型名称）
     * @param index 下标（一般为0）
     * @param start 开始帧
     * @param end 结束帧
     * @param fps 帧率（一般为60）
     */
    setFrameAction(info: any, index: any, start: any, end: any, fps: any): void;
    /**
     * @ignore
     */
    clearImgInterval(info: any): void;
    /**
     * 设置贴图轮播
     * @param {*} info 模型信息（模型或者模型名称）
     * @param {Object} option 图片配置
     * @param {*} option.imageList 图片列表 [url, url]
     * @param {*} option.screenConfigList BasicLabel配置列表 [url, url]
     * @param {*} option.duration 轮播时间 单位s 默认1s
     * @param {*} option.splitImage 整张图切割（和imageList互斥）{url // 图片链接, number // 切割数量}
     * @returns
     */
    setImgInterval(info: any, option?: {
        imageList: any;
        screenConfigList: any;
        duration: any;
        splitImage: any;
    }): Promise<void>;
    /**
     * 通过uuid拿设备信息
      * @param uuid 设备UUID
     */
    getDeviceByUUID(uuid: any): Promise<any>;
    /**
     * 恢复未保存的编辑设备初始状态
     * @param {*} deviceList 设备列表,默认不传为全部
     */
    resetEditDevice(deviceList: any): void;
    updateGroupDevice(uuid: any, status?: string, option?: {}): Promise<void>;
    getParadeList(): any;
    startParade(id: any, pathTracker: any, option?: {}): void;
    resetView(): void;
    flyTo(position: any): void;
    changeLodLayerVisible(ele: any): void;
    setModelMaterialByDeviceType(key: any, material: any, modelName: any): void;
    resetModelMaterial(key: any): void;
    closeViewRenderSceneModel(): void;
    add(object: any): any;
    destroy(): void;
    /**
     * @private
     * 打开場景同步
     */
    private openSceneSync;
    /**
     * @private
     *
     **/
    private _getMercatorScaleFactor;
    /**
     * @private
     */
    private onBeforeScenePrepareRender;
    set visible(visible: boolean);
    get visible(): boolean;
    set tileRenderStatus(status: boolean);
    get tileRenderStatus(): boolean;
    get tileLayers(): any[];
    get mvtLayers(): any[];
    get lodLayer(): MapLodLayer | null;
}
import { MapLodLayer } from '../../visual/index';
import { CeilManager } from './ceilManager';
